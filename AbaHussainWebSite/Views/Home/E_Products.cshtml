@model System.Data.DataTable
@{
    Layout = "~/Views/Shared/_ELayout.cshtml";
}
<div class="fs_menu_overlay"></div>
<!-- Hamburger Menu -->
<div class="container">
    <div class="row">
        <div class="col product_section clearfix">
            <!-- Sidebar -->
            <div class="sidebar" >
                <div class="sidebar_section">
                    <div class="sidebar_title">
                        <h5>Product Catagory</h5>
                    </div>
                    <ul class="sidebar_categories">
                        @{
                            string str = ViewBag.service;
                            string[] arr = str.Split(',');
                            for (int i = 0; i < arr.Length - 1; i++)
                            {
                                <li>@Html.ActionLink(arr[i] + " ", "E_GetProducts", "Home", new { Service_Name = arr[i], subcat = "" }, null)</li>
                            }
                        }
                    </ul>
                </div>

            </div>
            <!-- Main Content -->
            <div class="main_content" style="margin:10px">
                <!-- Products -->
                <div class="products_iso">
                    <div class="row">

                        <!-- Product Sorting -->                  
                        <div class="col-12">

                            @{
                                List<SelectListItem> list = new List<SelectListItem>();
                                string str1 = ViewBag.SubCategory;
                                string[] arr1 = str1.Split(',');
                                for (int i = 0; i < arr1.Length; i++)
                                {

                                    SelectListItem item = new SelectListItem();
                                    item.Text = arr1[i];
                                    list.Add(item);
                                }


                                using (Html.BeginForm("E_GetProducts", "Home", FormMethod.Get, new { id = "TheForm" }))
                                {

                                    @Html.DropDownList("CategoryID", (IEnumerable<SelectListItem>)list,
                                                           new Dictionary<string, object>
                                                           {
                                                               { "class" , "browser-default custom-select" },
                                                               {  "onchange" , "document.getElementById('TheForm').submit();" }
                                                           })
                                }
                            }
                        </div>
                        <div class="col-8">

                        </div>
                    </div>
                    <div class="row" style="margin-top:10px">
                        <div class="col">
                            <!-- Product Grid -->
                            <div class="container">
                                <div class="row">
                                    <!-- Product 1 -->
                                    @for (int i = 0; i < Model.Rows.Count; i++)
                                    {

                                        <div class="col-sm">
                                            <div class="product discount product_filter">
                                                <div class="product_image">
                                                    <img src="~/images/branches/branch1/b1.jpeg" width="180px" height="180px" alt="">
                                                </div>
                                                <div class="favorite favorite_left"></div>

                                                <div class="product_info">
                                                    <h6 class="product_name">
                                                        <a href="single.html">
                                                            @Html.DisplayFor(modelItem => Model.Rows[i]["enText"])
                                                        </a>
                                                    </h6>
                                                    <div class="product_price">@Html.DisplayFor(modelItem => Model.Rows[i]["Price"])</div>
                                                </div>
                                            </div>
                                        </div>


                                    }
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>



<script type="text/javascript">
  $(function() {
    $("#CategoryID").change(function() {
      $('#TheForm').submit();
    });
  });

</script>
